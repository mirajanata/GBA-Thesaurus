var $jscomp = $jscomp || {}; $jscomp.scope = {}; $jscomp.arrayIteratorImpl = function (a) { var b = 0; return function () { return b < a.length ? { done: !1, value: a[b++] } : { done: !0 } } }; $jscomp.arrayIterator = function (a) { return { next: $jscomp.arrayIteratorImpl(a) } }; $jscomp.makeIterator = function (a) { var b = "undefined" != typeof Symbol && Symbol.iterator && a[Symbol.iterator]; return b ? b.call(a) : $jscomp.arrayIterator(a) }; $jscomp.arrayFromIterator = function (a) { for (var b, c = []; !(b = a.next()).done;)c.push(b.value); return c };
$jscomp.arrayFromIterable = function (a) { return a instanceof Array ? a : $jscomp.arrayFromIterator($jscomp.makeIterator(a)) };
var BaseUri = { skos: "http://www.w3.org/2004/02/skos/core#", dcterms: "http://purl.org/dc/terms/", foaf: "http://xmlns.com/foaf/0.1/", geo: "http://www.w3.org/2003/01/geo/wgs84_pos#", gba: "http://resource.geolba.ac.at/PoolParty/schema/GBA/", owl: "http://www.w3.org/2002/07/owl#", rdfs: "http://www.w3.org/2000/01/rdf-schema#", dbpo: "http://dbpedia.org/ontology/" }, Uri = {
    PREF_LABEL: [BaseUri.skos + "prefLabel"], PICTURE: [BaseUri.foaf + "depiction"], SYNONYMS: [BaseUri.skos + "altLabel"], NOTATION: [BaseUri.skos + "notation"], GBA_STATUS: [BaseUri.gba +
        "GBA_Status"], GBA_DATAVIEWER: [BaseUri.gba + "DataViewer"], DESCRIPTION_1: [BaseUri.skos + "definition"], DESCRIPTION_2: [BaseUri.skos + "scopeNote", BaseUri.dcterms + "description", BaseUri.dcterms + "abstract"], CITATION: [BaseUri.dcterms + "bibliographicCitation"], REF_LINKS: [BaseUri.dcterms + "references"], RELATIONS_1: [BaseUri.skos + "broader", BaseUri.skos + "narrower", BaseUri.skos + "related"], RELATIONS_2: [BaseUri.skos + "exactMatch", BaseUri.skos + "closeMatch", BaseUri.skos + "relatedMatch", BaseUri.skos + "broadMatch", BaseUri.skos +
            "narrowMatch"], RELATIONS_3: [BaseUri.rdfs + "seeAlso", BaseUri.owl + "sameAs", BaseUri.dcterms + "relation", BaseUri.dcterms + "hasPart", BaseUri.dcterms + "isPartOf", BaseUri.dcterms + "conformsTo"], DATA_LINKS: [BaseUri.dcterms + "source", BaseUri.dcterms + "isReferencedBy", BaseUri.dcterms + "subject", BaseUri.dcterms + "isRequiredBy", BaseUri.dcterms + "identifier"], VISUALIZATION: [BaseUri.dbpo + "colourHexCode"], LOCATION: [BaseUri.geo + "lat", BaseUri.geo + "long", BaseUri.geo + "location", BaseUri.dcterms + "spatial"], CREATOR: [BaseUri.dcterms +
                "creator", BaseUri.dcterms + "created", BaseUri.dcterms + "modified", BaseUri.dcterms + "contributor"]
}, detail = {
    details: function (a) {
        var b = 'PREFIX skos:<http://www.w3.org/2004/02/skos/core#>\n                    SELECT DISTINCT ?p ?o (GROUP_CONCAT(DISTINCT CONCAT(STR(?L), "@", lang(?L)) ; separator="|") AS ?Label)\n                    WHERE {\n                    VALUES ?s {<' + a + ">} ?s ?p ?o .\n                    OPTIONAL {?o skos:prefLabel ?L}\n                    }\n                    GROUP BY ?p ?o\n            ";
        ws.json(a.split("/")[3], b, function (c) {
            for (var b in detail.FRONT_LIST) detail.insertFrontPart(b, a, c, Array.from(detail.FRONT_LIST[b].values())); var e = $("#pageContent"); e.append('<hr>\n                                <div style="cursor: pointer; color: #404040;" id="detailsBtn"\n                                    onclick="javascript: page.toggleRead(\'detailsBtn\', \'detailsToggle\', \'read more\');"> &#9654; <em>read more ..</em>\n                                </div>\n                                <div style="display:none;" id="detailsToggle">\n                                <br>\n                                    <table id="details"></table>\n                                </div>\n                                ');
            for (b in detail.TECHNICAL_LIST) detail.insertTechnicalPart(b, c, Array.from(detail.TECHNICAL_LIST[b].values())); e.append(""); detail.insertConceptBrowser(e, a, 50)
        })
    }, insertFrontPart: function (a, b, c, d) {
        var e = this, h = $("#pageContent"), g = ""; d.forEach(function (d) {
            var f = e.getObj(c, d); if (0 < f.size) switch (a) {
                case "prefLabel": d = e.setUserLang(Array.from(f).join("|").replace(/  <span class="lang">/g, "@").replace(/<\/span>/g, "")); g += '<h3 id="title" class="mt-4">' + d + "</h3>"; g += '   <p class="lead">URI:\n                                    <span id="uri" class="" style="word-wrap:break-word;">' +
                    b + '</span>\n                                        &nbsp;&nbsp;&nbsp;&#8658;\n                                    <a href="' + b + '.rdf"> RDF download</a>\n                                </p>\n                                <hr>'; e.insertApp("Database", "tables", page.BASE + "?uri=" + b + "&list=" + encodeURIComponent(d) + "&lang=" + lang.ID, "database"); page.updateSharingTexts(d); break; case "dataViewer": -1 == b.search("/structure/") ? e.insertApp("Data", "Viewer", "http://gisgba.geologie.ac.at/DataViewer/tdv/Index.aspx?url=" +
                        b + "&lang=" + lang.ID, "table") : e.insertApp("Structure", "Viewer", "http://www.geolba.net/thesaurus/structureViewer.html?uri=" + b + "&lang=" + lang.ID, "gem"); break; case "picture": f.forEach(function (a) { return e.insertApp("text1", "text2", $(a).attr("href"), "picture") }); break; case "altLabel": g += '<ul class="' + a + '"><li>' + Array.from(f).join("</li><li>") + "</li></ul>"; break; case "notation": h.append("<hr><span>Notation: </span>"); g += '<ul class="' + a + '"><li>' + Array.from(f).join("</li><li>") + "</li></ul>"; break; case "gbaStatus": h.append("<br><span>GBA Status: </span>");
                    d = Number(Array.from(f)[0].slice(0, 1)); f = ["", "success", "danger", "primary"]; g += '<span class="badge badge-' + f[d] + '"> ' + ["", "official use", "informal use", "obsolete"][d] + " </span>"; $("#uri").attr("class", "text-" + f[d]); break; case "abstract": g += '<hr><div class="' + a + '">' + e.setUserLang(Array.from(f).join("|").replace(/  <span class="lang">/g, "@").replace(/<\/span>/g, "")) + "</div>"; break; case "citation": var k = []; f.forEach(function (a) { k.push($.parseHTML(a)[0].innerHTML) }); g += '<div id="citation"></div>'; e.getCitation(k);
                    break; case "relatedConcepts": -1 == g.search("<h4") && (g += '<hr><h4 style="margin-bottom: 1rem;">' + lang.SEM_REL + "</h4>"); g += '<table><tr><td class="skosRel' + d.search("Match") + ' skosRel">' + d.replace(BaseUri.skos, "") + '</td><td class="skosRelUl"><ul><li>' + e.shortenText(Array.from(f).join("</li><li>")) + "</li></ul></td></tr></table>"; break; default: g += '<h3 id="title" class="mt-4">Error: Undefined key ' + a + "</h3><hr>"
            }
        }); h.append(g)
    }, shortenText: function (a) {
        var b = {
            INSPIRE: "http://inspire.ec.europa.eu/codelist/",
            CGI: "http://resource.geosciml.org/classifier/cgi/", ICS: "http://resource.geosciml.org/classifier/ics/", DBpedia: "http://dbpedia.org/resource/", BGS: "http://data.bgs.ac.uk/id/EarthMaterialClass/", WIKIDATA: "http://www.wikidata.org/entity/"
        }, c; for (c in b) -1 != a.search(b[c]) && (a = a.split(">" + b[c])[0] + ">" + a.split(">" + b[c])[1].replace("<", " (" + c + ")<")); return a
    }, insertTechnicalPart: function (a, b, c) {
        var d = this, e = "", h = {}; c.forEach(function (c) {
            var f = d.getObj(b, c); 0 < f.size && (e += '<tr><td headers="th1' + a + '" class="propTech">' +
                d.createHref(c) + '</td><td headers="th2' + a + '"><ul><li>' + Array.from(f).join("</li><li>") + "</li></ul></td></tr>", "http://www.w3.org/2003/01/geo/wgs84_pos#lat" == c && (h.lat = Number(f.values().next().value)), "http://www.w3.org/2003/01/geo/wgs84_pos#long" == c && (h["long"] = Number(f.values().next().value)), h.hasOwnProperty("lat") && h.hasOwnProperty("long") && (d.insertApp("type", "location", "http://www.google.com/maps/place/" + h.lat + "N+" + h["long"] + "E/@47.6381118,13.6028916,7z/data=!4m2!3m1!1s0x0:0x0", "map-marker"),
                    h = {}), "http://dbpedia.org/ontology/colourHexCode" == c && d.insertApp('<span class="colorBox" style="background:' + f.values().next().value + ';">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br>Color', f.values().next().value, "https://www.w3schools.com/colors/colors_converter.asp?color=" + f.values().next().value.replace("#", ""), ""))
        }); 0 < e.length && $("#details").append('\n                    <tr id="' + a + "\">\n                        <th id='th1" + a + "'></th>\n                        <th id='th2" + a + "'>\n                            " +
            lang[a + "_H"] + "\n                        </th>\n                    </tr>\n                    <tr>\n                        " + e + "\n                    </tr>")
    }, getObj: function (a, b) { var c = this; return new Set($.map(a.results.bindings.filter(function (a) { return a.p.value === b }), function (a) { return "" !== a.Label.value ? '<a href="' + page.BASE + "?uri=" + a.o.value + "&lang=" + lang.ID + '">' + c.setUserLang(a.Label.value) + "</a> " : c.createHref(a.o.value) + " " + c.createDTLink(a.o.datatype) + " " + c.langTag(a.o["xml:lang"]) })) },
    createHref: function (a) { if ("http://resource.geolba" == a.substring(0, 22)) a = '<a href="' + page.BASE + "?uri=" + a + '">' + a + "</a>"; else if ("http" == a.substring(0, 4)) { for (var b = a, c = $jscomp.makeIterator(Object.entries(BaseUri)), d = c.next(); !d.done; d = c.next()) { var e = $jscomp.makeIterator(d.value); d = e.next().value; e = e.next().value; b = b.replace(e, d + ":") } a = '<a href="' + a + '">' + this.createPdfRef(b.replace(/_/g, " ")) + "</a>" } return a }, langTag: function (a) { return "undefined" !== typeof a ? '<span class="lang">' + a + "</span>" : "" }, createDTLink: function (a) {
        "undefined" !==
        typeof a ? 0 < a.indexOf("XMLSchema") && (a = '<a class="datatype" href="' + a + '">' + a.replace("http://www.w3.org/2001/XMLSchema#", "xsd:") + "</a>") : a = ""; return a
    }, setUserLang: function (a) { return 0 < a.indexOf("@" + lang.ID) ? a.substr(0, a.indexOf("@" + lang.ID)).split("|").slice(-1).pop() : 0 < a.indexOf("@en") ? a.substr(0, a.indexOf("@en")).split("|").slice(-1).pop() : 0 < a.indexOf("@") ? a.substr(0, a.indexOf("@")).split("|").slice(-1).pop() : a.split("|")[0] }, getCitation: function (a) {
        a = "<" + a.join("> <") + ">"; ws.json("ref", "SELECT DISTINCT ?Citation ?DSN ?PDF\n                                    WHERE {\n                                    VALUES ?r {" +
            a + '}\n                                    ?r <http://www.w3.org/2004/02/skos/core#definition> ?Citation .\n                                    OPTIONAL {?r <http://resource.geolba.ac.at/schema/GBA/DNS> ?dsn}\n                                    BIND (IF(exists{?r <http://resource.geolba.ac.at/schema/GBA/DNS> ?dsn} , ?dsn, "") AS ?DSN)\n                                    OPTIONAL {?r <http://resource.geolba.ac.at/schema/GBA/PDF_download> ?pdf}\n                                    BIND (IF(exists{?r <http://resource.geolba.ac.at/schema/GBA/PDF_download> ?pdf} , ?pdf, "") AS ?PDF)\n                                    }',
            function (a) {
                var c = '<br><blockquote class="blockquote">'; a.results.bindings.forEach(function (a) {
                    c += '<footer class="blockquote-footer">' + a.Citation.value.replace(/:/g, ': <cite title="">') + "</cite>"; "" !== a.PDF.value && "http" == a.PDF.value.substring(0, 4) ? c += '&nbsp;-&nbsp;<a href="' + a.PDF.value + '" style="font-style: normal;">[PDF]</a>' : "" !== a.PDF.value && (c += '&nbsp;-&nbsp;<a href="http://opac.geologie.ac.at/wwwopacx/wwwopac.ashx?command=getcontent&server=images&value=' + a.PDF.value + '" style="font-style: normal;">[PDF]</a>');
                    "" !== a.DSN.value && (c += '&nbsp;-&nbsp;<a href="http://opac.geologie.ac.at/document/' + a.DSN.value + '" style="font-style: normal;">[Catalog]</a>'); c += "</footer>"
                }); $("#citation").append(c + "</blockquote>")
            })
    }, provideAll: function (a, b, c) {
        var d = 'PREFIX dcterms:<http://purl.org/dc/terms/>\n                    PREFIX skos:<http://www.w3.org/2004/02/skos/core#>\n                    SELECT DISTINCT ?s (STR(?l) AS ?Label) ?cs (STR(?csl) AS ?Schema) (COALESCE(?csd, "") AS ?SchemaDesc) (COALESCE(?sd, "") AS ?Desc) ?tc\n                    WHERE {\n                    <' +
            b + '> skos:broader* ?b . ?b skos:topConceptOf ?cs .\n                    ?cs dcterms:title ?csl .  FILTER(lang(?csl)="' + lang.ID + '") .\n                    ?cs skos:hasTopConcept ?tc . ?s skos:broader* ?tc; skos:prefLabel ?l . FILTER(lang(?l)="' + lang.ID + '")\n                    OPTIONAL{?cs dcterms:description ?csd .  FILTER(lang(?csd)="' + lang.ID + '") }\n                    OPTIONAL{?s skos:definition ?sd .  FILTER(lang(?sd)="' + lang.ID + '") }\n                    }\n                    ORDER BY ?Label\n                    LIMIT 50\n                    OFFSET ' +
            c; ws.json(b.split("/")[3], d, function (b) {
                var d = $("#allConcepts"), e = []; $("#" + a).append(""); $("#allConceptsHeader").html(b.results.bindings[0].Schema.value + " (" + Number(c + 1) + " .. " + Number(c + b.results.bindings.length) + ")"); d.empty().append("<div>" + b.results.bindings[0].SchemaDesc.value + "</div><br>"); b.results.bindings.forEach(function (a) {
                    a.s.value == a.tc.value ? e.push('<a data-toggle="tooltip" data-placement="right" data-html="true" title="<h4>' + a.Label.value + "</h4>" + a.Desc.value.slice(0, 230) + '.." href="' +
                        page.BASE + "?uri=" + a.s.value + "&lang=" + lang.ID + '"><strong>' + a.Label.value + "</strong></a> (&#8658; top concept)") : e.push('<a data-toggle="tooltip" data-placement="right" data-html="true" title="<h4>' + a.Label.value + "</h4>" + a.Desc.value.slice(0, 230) + '.." href="' + page.BASE + "?uri=" + a.s.value + "&lang=" + lang.ID + '">' + a.Label.value + "</a>")
                }); 0 !== c && d.append(".. "); d.append(e.join(", ")); document.getElementById("leftBtn").value = c; document.getElementById("rightBtn").value = c; "0" == document.getElementById("leftBtn").value ?
                    ($("#leftBtn").prop("disabled", !0), 50 > Object.keys(b.results.bindings).length && $("#coBr").hide()) : $("#leftBtn").prop("disabled", !1); 50 > Object.keys(b.results.bindings).length ? $("#rightBtn").prop("disabled", !0) : ($("#rightBtn").prop("disabled", !1), d.append(" ...")); $(document).ready(function () { $('[data-toggle="tooltip"]').tooltip({ trigger: "hover" }); $('[data-toggle="tooltip').on("click", function () { $(this).tooltip("hide"); $("#DeleteUserModal").modal() }) })
            })
    }, insertConceptBrowser: function (a, b, c) {
        a.append('\n        <hr>\n        <div class="card my-4">\n            <ul id="coBr" class="pagination mb-4 cardHeaderRight">\n                <li>\n                    <button type="button" id="leftBtn" class="btn btn-outline-secondary btn-sm" onclick="detail.provideAll(\'allConcepts\', \'' +
            b + '\', Number(this.value)-50)">\n                        &#9664;\n                    </button>\n                </li>\n                <li>\n                    <button type="button" id="rightBtn" class="btn btn-outline-secondary btn-sm" onclick="detail.provideAll(\'allConcepts\', \'' + b + '\', Number(this.value)+50)">\n                        &#9654;\n                    </button>\n                </li>\n            </ul>\n            <h4 id="allConceptsHeader" class="card-header"></h4>\n            <div id="allConcepts" class="card-body"></div>\n        </div>\n                           ');
        this.provideAll("allConcepts", b, 0)
    }, createPdfRef: function (a) {
    "pdf" == a.split(".").slice(-1).pop().toLowerCase() && (a += ' - <img alt="PDF version" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAIAAAACUFjqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAIcKAACMDQABBbcAAIDoAABSBQABFVsAADavAAAfQQLQ3GkAAAFDSURBVHjaADYByf4B////+gAAurGy5f/39vz6Cfn8Bu/1EwgRPEFFEyMWAf6ajgHZ5vjF2Pz+AwIGBef67PdANSx6b6nJxhAuKATxk4QB0+4PAAAAAAAAAADRAAD1E/3p3Du259X3+ucE6CIv9Q70BPfyDgAC5vr84Pf9QVhZ4+DvMA4q9vf9Af///+kA/r7NtSMjJwrw+uO3xklYZgDh7QAABs7KzAQAAAAA5usu3AwrGSLr49385fz90dj8LiPJCfuU7vgEAAAAAAQDCxQTAPX++Le8LyAW08y57sXyDSwkavz8BAAAAP76+O/05va1yRoeBf1LKwkIKBfQ0BPn7w3x+wQAAAAJBwcC8+oZLR4QQ0f7APAA8+oQNz8W+grJqK8EAAAABQcHu+Pi29HP87OxBvX+CfsE9Pj89QACHCsrAwCLf5kn2fkcxQAAAABJRU5ErkJggg==">');
        return a
    }, insertApp: function (a, b, c, d) {
        "picture" == d ? $("#appsBody2").append('\n                <div class="apps thumbNail">\n                    <a href="' + c + '">\n                        <img alt="' + a + '" src="' + this.imgPng(c) + '" class="img-thumbnail" alt="Image" title="Image" onerror="$(this).remove();" style="width:75px; height:75px; overflow:hidden;">\n                    </a>\n                </div>') : "" == d ? $("#appsBody2").append('\n                <div class="apps">\n                    <a href="' +
            c + '" class="card-link">\n                        ' + a + "<br>" + b + "\n                    </a>\n                </div>") : $("#appsBody1").append('\n                <div class="apps">\n                    <span class="appsIcon fa fa-' + d + ' text-info style=""></span>\n                    <br>\n                    <a href="' + c + '" class="card-link">\n                        ' + a + "<br>" + b + "\n                    </a>\n                </div>")
    }, imgPng: function (a) {
    -1 < a.search("geologie.ac.at") && (a = a.split("."), a.pop(),
        a = a.join(".") + ".png"); return a
    }, TECHNICAL_LIST: {
        descriptions: [].concat($jscomp.arrayFromIterable(Uri.PREF_LABEL), $jscomp.arrayFromIterable(Uri.SYNONYMS), $jscomp.arrayFromIterable(Uri.DESCRIPTION_1), $jscomp.arrayFromIterable(Uri.DESCRIPTION_2)), scientificReferences: Uri.CITATION, semanticRelations: [].concat($jscomp.arrayFromIterable(Uri.RELATIONS_1), $jscomp.arrayFromIterable(Uri.RELATIONS_2), $jscomp.arrayFromIterable(Uri.RELATIONS_3)), dataLinks: Uri.DATA_LINKS, visualization: [].concat($jscomp.arrayFromIterable(Uri.PICTURE),
            $jscomp.arrayFromIterable(Uri.VISUALIZATION)), location: Uri.LOCATION, creator: Uri.CREATOR
    }, FRONT_LIST: { prefLabel: Uri.PREF_LABEL, picture: Uri.PICTURE, altLabel: [].concat($jscomp.arrayFromIterable(Uri.PREF_LABEL), $jscomp.arrayFromIterable(Uri.SYNONYMS)), notation: Uri.NOTATION, gbaStatus: Uri.GBA_STATUS, "abstract": Uri.DESCRIPTION_1, citation: Uri.REF_LINKS, relatedConcepts: [].concat($jscomp.arrayFromIterable(Uri.RELATIONS_1), $jscomp.arrayFromIterable(Uri.RELATIONS_2)), dataViewer: Uri.GBA_DATAVIEWER }
};