var page = {
    BASE: location.protocol + "//" + location.host + location.pathname, urlParams: new URLSearchParams(window.location.search), init: function () {
        var a = (navigator.language || navigator.language).substring(0, 2); $("#appsCard").toggle(); this.urlParams.has("lang") && (a = this.urlParams.get("lang")); "de" !== a ? (a = "en", $("#lang").text("EN")) : $("#lang").text("DE"); lang.load(a); this.setNavbarFooter(); search.insertSearchCard(); var b = this.urlParams; if (b.has("search")) search.insertSearch(decodeURI(b.get("search"))), this.insertProjCards();
        else if (b.has("info")) this.insertInfo(decodeURI(b.get("info"))), this.insertProjCards(); else if (b.has("list")) { $("#pageContent").empty(); var c = "\u00a7", d = "\u00a7"; b.has("uri") && (c = decodeURI(b.get("uri").replace(/["';><]/gi, "")), d = decodeURI(b.get("list").replace(/["';><]/gi, ""))); search.insertSparql(c, d); this.insertProjCards() } else b.has("uri") ? (b = decodeURI(b.get("uri").replace(/["';><]/gi, "")), $("#pageContent").empty(), this.initApps(b), detail.details(b), b = lang[b.split("/")[3] + "Desc"], this.insertSideCard_projectInfo(b)) :
            (this.insertPageDesc(), this.insertComments("proj_desc", lang.LIST_THESAURUS_PROJECTS), this.insertComments("other_desc", [lang.DESC_INSPIRE, lang.DESC_LINKEDDATA]), this.insertProjCards()); search.initProjects(); document.documentElement.setAttribute("lang", a); this.updateSharingUrl($("#fbShare")); this.updateSharingUrl($("#twShare"))
    }, updateSharingUrl: function (a) { var b = a.attr("href").replace("www.geolba.net", encodeURIComponent(window.location.href)); a.attr("href", b) }, updateSharingTexts: function (a) {
        this.updateSharingText($("#fbShare"),
            a); this.updateSharingText($("#twShare"), a)
    }, updateSharingText: function (a, b) { var c = a.attr("href").replace("GBA%20Thesaurus", encodeURIComponent(b)); a.attr("href", c) }, setLang: function (a) { -1 != location.href.indexOf("lang=") ? "de" == a ? location.replace(location.href.replace("lang=en", "lang=de")) : location.replace(location.href.replace("lang=de", "lang=en")) : -1 != location.href.indexOf("?") ? location.replace(location.href + "&lang=" + a) : location.replace(location.href + "?lang=" + a) }, openParaLink: function (a) {
        window.open(this.BASE +
            "?" + a + "&lang=" + lang.ID, "_self", "", "false")
    }, toggleRead: function (a, b, c) { c = $("#" + b).is(":visible") ? "&#9654; <em>" + c + " ..</em>" : "&#9660; <em>" + c + " ..</em>"; $("#" + a).html(c); $("#" + b).slideToggle() }, openFeedBack: function () {
        var a = "Anfrage", b = ""; 0 < $("#uri").length && (b = "URI: " + $("#uri").text()); 0 < $(".altLabel").length && (a = $(".altLabel").html().replace(/<span class="lang">/g, "[").replace(/<\/span>/g, "] ").replace(/<li>/g, "").replace(/<\/li>/g, "").replace(/  /g, "")); window.location.href = "mailto:thesaurus@geologie.ac.at?subject=" +
            a + "&body=" + b
    }, insertSideCard_projectInfo: function (a) { $("#proj_links").append('<div class="card border-info mb-3">\n                                <h4 class="card-header">' + a.name + " (" + lang.TOPIC + ')</h4>\n                                <div id="' + a.id + 'Card" class="card-body">' + a.desc + "</div>\n                            </div>") }, insertInfo: function (a) { $("#page_desc").empty().append("<br>" + lang["DESC_" + a.toUpperCase()]) }, setNavbarFooter: function () {
        $("#LABEL_CONTACT").html(lang.LABEL_CONTACT); $("#contact").html(lang.LABEL_CONTACT);
        $("#license").html(lang.LABEL_LICENSE); $("#disclaimer").html(lang.LABEL_DISCLAIMER); $("#IMG_GBALOGO").attr("src", "img/" + lang.IMG_GBALOGO)
    }, insertProjCards: function () {
        var a = $("#proj_links"), b = '\n                            PREFIX dcterms:<http://purl.org/dc/terms/>\n                            PREFIX skos:<http://www.w3.org/2004/02/skos/core#>\n                            SELECT ?cL (COALESCE(?cD, "") AS ?desc) (COUNT(?n) AS ?count) (GROUP_CONCAT(DISTINCT ?L; separator = "|") as ?topConcepts)\n                            WHERE {\n                            ?c a skos:ConceptScheme; dcterms:title ?cL\n                            . FILTER(lang(?cL)="' +
            lang.ID + '") .\n                            ?c skos:hasTopConcept ?tc . ?tc skos:prefLabel ?tcL . FILTER(lang(?tcL)="' + lang.ID + '") .\n                            ?tc skos:narrower* ?n\n                            BIND(CONCAT(STR(?tc),"$",STR(?tcL)) AS ?L)\n                            OPTIONAL {?c dcterms:description ?cD . FILTER(lang(?cD)="' + lang.ID + '")}\n                            }\n                            GROUP BY ?cL ?cD ORDER BY ?cL'; lang.LIST_THESAURUS_PROJECTS.forEach(function (c) {
                ws.projectJson(c.id,
                    b, function (b) {
                        a.append('<div class="card my-4"><h4 class="card-header">' + c.name + '</h4><div id="' + c.id + 'Card" class="card-body"></div></div>'); $("#" + c.id + "Comment").append('\n                            <br>\n                            <div style="cursor: pointer;" id="' + c.id + 'rmBtn"\n                            onclick="javascript: page.toggleRead(\'' + c.id + "rmBtn', '" + c.id + 'ReadMore\', \'read more\');"\n                            class="text-muted">\n                                &#9654; <em>read more ..</em>\n                            </div>\n                            <div style="display:none;" id="' +
                            c.id + 'ReadMore">\n                                <br>\n                            </div>'); b.results.bindings.forEach(function (a) {
                                $("#" + c.id + "Card").append(a.cL.value + ':<br><a href="' + page.BASE + "?uri=" + a.topConcepts.value.split("$").join("&lang=" + lang.ID + '">').split("|").join('</a>, <a href="' + page.BASE + "?uri=") + "</a><br>"); $("#" + c.id + "ReadMore").append("<h4>" + a.cL.value + " (" + a.count.value + '):</h4><a href="' + page.BASE + "?uri=" + a.topConcepts.value.split("$").join("&lang=" + lang.ID + '">').split("|").join('</a>, <a href="' +
                                    page.BASE + "?uri=") + "</a><br>" + a.desc.value + "<br><br>")
                            }); $("#" + c.id + "ReadMore").append('\n                        <p class="">\n                            <a href="http://resource.geolba.ac.at/GeologicUnit/export/' + c.id + '.rdf" type="button" class="btn btn-outline-info btn-sm">\n                                RDF/XML download\n                            </a>\n                                &nbsp;\n                            <a href="http://resource.geolba.ac.at/PoolParty/sparql/' + c.id + '" type="button" class="btn btn-outline-info btn-sm">\n                                SparQL endpoint\n                            </a>\n                                &nbsp;\n                            <a href="http://resource.geolba.ac.at/thesaurus/ref.html#' +
                                c.id + '" type="button" class="btn btn-outline-info btn-sm">\n                                ' + lang.LABEL_BIBLREF + "\n                            </a>\n                        </p>\n                        <hr>")
                    })
            })
    }, insertComments: function (a, b) {
        var c = $("#" + a); c.empty(); b.forEach(function (a) {
            c.append('\n                                                <div class="media mb-4">\n                                                    <img alt="' + a.name + '" class="d-flex mr-3 rounded-circle" src="img/' + a.image +
                '">\n                                                    <div id="' + a.id + 'Comment" class="media-body">\n                                                        <h4 class="mt-0">' + a.name + "</h4>\n                                                        " + a.desc + "\n                                                    </div>\n                                                </div>")
        })
    }, insertPageDesc: function () {
        $("#page_desc").append('<br><h3 id="title">GBA Thesaurus</h3>').append("<h3>" + lang.TITLE_THES_2 +
            "</h3>").append("<p>" + lang.DESC_THESAURUS + "</p>")
    }, initApps: function (a) { $("#appsCard").toggle(); $("#appsCard .card-header").text(lang.APPS); $("#appsBody1").append('\n                                        <div class="apps">\n                                            <span class="appsIcon fa fa-network-wired text-info"></span>\n                                            <a href="http://resource.geolba.ac.at/thesaurus/network.html#' + a.split("geolba.ac.at/")[1] + "/" + lang.ID + '" title="Network Diagram" class="card-link">\n                                                <br>Network<br>diagram\n                                            </a>\n                                        </div>') }
};